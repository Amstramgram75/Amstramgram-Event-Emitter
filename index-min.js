export default class AmstramgramEventEmitter{#e={};#t={};#s;#n;#i(e,t,s=!1){e.split(" ").forEach((e=>{let n=!1;const i=this.#e[e]||new Set,c=this.#t[e]||new Set,v=new Set([...c,...i]),l=s?this.#t:this.#e,h=l[e]||(l[e]=new Set);v.has(t)||(n=!0,h.add(t)),this.#s&&this.emit(this.#s,{event:e,callback:t,success:n,list:this.eventsAndCallbacksList})}))}#c(){[this.#e,this.#t].forEach((e=>{Object.keys(e).forEach((t=>{e[t].forEach((s=>{e[t].delete(s),this.#n&&this.emit(this.#n,{event:t,callback:s,success:!0,list:this.eventsAndCallbacksList})})),delete e[t]}))}))}#v(e){let t=(!1)[(this.#e,this.#t)].forEach((s=>{void 0!==s[e]&&(s[e].forEach((n=>{s[e].delete(n),t=!0,this.#n&&this.emit(this.#n,{event:e,callback:n,success:!0,list:this.eventsAndCallbacksList})})),delete s[e])}));!t&&this.#n&&this.emit(this.#n,{event:e,callback:"",success:!1,list:this.eventsAndCallbacksList})}#l(e,t){let s=!1;[this.#e,this.#t].forEach((n=>{void 0!==n[e]&&(n[e].delete(t),0==n[e].size&&delete n[e],s=!0,this.#n&&this.emit(this.#n,{event:e,callback:t,success:s,list:this.eventsAndCallbacksList}))})),!s&&this.#n&&this.emit(this.#n,{event:e,callback:t,success:s,list:this.eventsAndCallbacksList})}constructor(e="eventadded",t="eventremoved"){this.#s="string"!=typeof e||/\s/g.test(e)?"":e,this.#n="string"!=typeof t||/\s/g.test(t)?"":t}get eventsAndCallbacksList(){let e={};return[Object.keys(this.#e),Object.keys(this.#t).filter((e=>!Object.keys(this.#e).includes(e)))].forEach((t=>t.forEach((t=>{let s={};s.callbacks=this.#e[t]||new Set,s.callbacksOnce=this.#t[t]||new Set,(s.callbacks.size>0||s.callbacksOnce.size>0)&&(e[t]=s)})))),e}on(e,t){return this.#i(e,t),this}once(e,t){return this.#i(e,t,!0),this}off(e="",t){return""==e?this.#c():e.split(" ").forEach((e=>{null==t?this.#v(e):this.#l(e,t)})),this}emit(e,...t){return[this.#t[e],this.#e[e]].forEach(((s,n)=>{void 0!==s&&s.forEach(function(i){i.apply(this,t),0==n&&(s.delete(i),0==s.size&&delete this.#t[e])}.bind(this))})),this}}